<?xml version="1.0" encoding="UTF-8"?>
<SQL><![CDATA[
SELECT
D.UUID,
S.STORAGE_NUMBER,
M.SUB_NUMBER,
M.SUB_NAME,
D.OUTPUT_AMOUNT,
D.AMOUNT,
D.PURCHASE_DATE,
D.MANUFACTURE_DATE,
D.OVERINSURED_DATE,
D.TOTAL_PRICES
FROM REP_STORAGE_DETAIL D
LEFT JOIN REP_SUBSTANCE_STORAGE S
ON D.NUMBERID=S.UUID AND (S.ISDELETED IS NULL OR S.ISDELETED = 0)
LEFT JOIN REP_SUBSTANCE_MESSAGE M
ON M.UUID=D.MESSAGEID AND (M.ISDELETED IS NULL OR M.ISDELETED = 0)
WHERE (D.ISDELETED IS NULL OR D.ISDELETED = 0)
<#if warehouseId? exists &&warehouseId ?length gt 0>
and S.STORAGE_WAREHOUSE = '${warehouseId}'
</#if>
<#if subId? exists &&subId ?length gt 0>
and D.MESSAGEID ='${subId}'
</#if>
]]></SQL>